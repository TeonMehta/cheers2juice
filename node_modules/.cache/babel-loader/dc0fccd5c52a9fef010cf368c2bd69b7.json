{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tswsbtd/Documents/cheers2juice/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/tswsbtd/Documents/cheers2juice/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/tswsbtd/Documents/cheers2juice/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/tswsbtd/Documents/cheers2juice/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tswsbtd/Documents/cheers2juice/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/tswsbtd/Documents/cheers2juice/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/tswsbtd/Documents/cheers2juice/v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import Header from\"./components/Header\";import Footer from\"./components/Footer\";import Home from\"./pages/Home\";import Shop from'./pages/Shop';import Checkout from'./pages/Checkout';import Contact from'./pages/Contact';import About from\"./pages/About\";import'bootstrap/dist/css/bootstrap.min.css';import{Switch,Route,Redirect}from\"react-router-dom\";import SpecificProduct from\"./pages/SpecificProduct\";import Authentication from\"./pages/Authentication\";import{auth,createUserProfileDocument}from'./firebase/utils';import React,{Component}from'react';import{connect}from\"react-redux\";import{setCurrentUser as _setCurrentUser}from'./redux/user/user.actions';import{createStructuredSelector}from'reselect';import{selectCurrentUser}from'./redux/user/user.selector';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.unsubscribeFromAuth=null;return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var setCurrentUser=this.props.setCurrentUser;this.unsubscribeFromAuth=auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth){var userRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!userAuth){_context.next=5;break;}_context.next=3;return createUserProfileDocument(userAuth);case 3:userRef=_context.sent;userRef.onSnapshot(function(snapShot){setCurrentUser(_objectSpread({id:snapShot.id},snapShot.data()));});case 5:setCurrentUser(userAuth);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unsubscribeFromAuth();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:Home}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/shop\",component:Shop}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/shop/:productId\",component:SpecificProduct}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/about\",component:About}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/checkout\",component:Checkout}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/contact\",component:Contact}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/signin\",render:function render(){return _this2.props.currentUser?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsx(Authentication,{});}})]}),/*#__PURE__*/_jsx(Footer,{})]});}}]);return App;}(Component);var mapStateToProps=createStructuredSelector({currentUser:selectCurrentUser});var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setCurrentUser:function setCurrentUser(user){return dispatch(_setCurrentUser(user));}};};export default connect(mapStateToProps,mapDispatchToProps)(App);","map":{"version":3,"sources":["/Users/tswsbtd/Documents/cheers2juice/v2/src/App.js"],"names":["Header","Footer","Home","Shop","Checkout","Contact","About","Switch","Route","Redirect","SpecificProduct","Authentication","auth","createUserProfileDocument","React","Component","connect","setCurrentUser","createStructuredSelector","selectCurrentUser","App","unsubscribeFromAuth","props","onAuthStateChanged","userAuth","userRef","onSnapshot","snapShot","id","data","currentUser","mapStateToProps","mapDispatchToProps","dispatch","user"],"mappings":"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","sourcesContent":["import Header from \"./components/Header\";\nimport Footer from \"./components/Footer\";\nimport Home from \"./pages/Home\";\nimport Shop from './pages/Shop'\nimport Checkout from './pages/Checkout'\nimport Contact from './pages/Contact'\nimport About from \"./pages/About\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport SpecificProduct from \"./pages/SpecificProduct\";\nimport Authentication from \"./pages/Authentication\";\nimport { auth, createUserProfileDocument } from './firebase/utils'\nimport React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { setCurrentUser } from './redux/user/user.actions';\nimport { createStructuredSelector } from 'reselect';\nimport { selectCurrentUser } from './redux/user/user.selector';\n\nclass App extends Component {\n\n  unsubscribeFromAuth = null;\n\n  componentDidMount() {\n    const { setCurrentUser } = this.props;\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n\n        userRef.onSnapshot(snapShot => {\n          setCurrentUser({\n            id: snapShot.id,\n            ...snapShot.data()\n          });\n        });\n      }\n      setCurrentUser(userAuth);\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n  }\n  render() {\n\n\n    return (\n      <div className=\"App\" >\n        <Header />\n        <Switch>\n          <Route exact path='/' component={Home} />\n          <Route exact path='/shop' component={Shop} />\n          <Route exact path='/shop/:productId' component={SpecificProduct} />\n          <Route exact path='/about' component={About} />\n          <Route exact path='/checkout' component={Checkout} />\n          <Route exact path='/contact' component={Contact} />\n          <Route exact path='/signin' render={() => this.props.currentUser ? (<Redirect to='/' />) : (<Authentication />)} />\n        </Switch>\n        <Footer />\n      </div>\n    );\n  }\n\n}\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser\n});\n\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}